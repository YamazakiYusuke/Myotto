<h1 class="text-center my-5"><%= t('.all_book') %></h1>

<%# 検索機能 %>
<% if false %>
  <%# 修正が必要 本の数が増えたら追加する %>
  <%= search_form_for @search,url: books_path do |f| %>
    <%= f.search_field :title_cont, placeholder: t('.title') %>
    <% if false %>
      <%= f.label :book_locale_statuses_locale_id, t('.locale') %>
      <%= f.collection_select :book_locale_statuses_locale_id, Locale.all, :id, :name, include_blank: true %>
    <% end %>
    <%= f.submit t('.search'), class: "btn btn-default" %></div>
  <% end %>
<% end %>


<h3 class="my-5 text-center"><%= link_to t('.create_book'), new_book_path, class: "btn btn-primary btn-lg" if admin_user? %></h3>

<%# テーブルじゃない形で作り直す bootstrapで %>

<table class="offset-md-1 col-md-10 mt-5">
  <thead class="h3">
    <tr>
      <th></th>
      <th ><%= t('.title') %></th>
      <th><%= t('.author') %></th>
      <th><%= t('.issued_date') %></th>
      <th><%= t('.difficulty') %></th>
      <th><%= t('.locale') %></th>
    </tr>
  </thead>

  <tbody class="h3">
    <% @books.each do |book| %>
      <tr>
        <td><%= image_tag book.image.url %></td>
        <td class=""><%= book.title %></td>
        <td class=""><%= book.author %></td>
        <td class="">
          <% if book.issued_date.present? %>
            <%= book.issued_date.strftime("%Y") %>
          <% else %>
            <%= t('.unknown') %>
          <% end %>
        </td>
        <td class="">
          <% if book.book_locale_statuses[0].difficulty.present? %>
            <%= book.book_locale_statuses[0].difficulty %> 
          <% else %>
            <%= t('.unknown') %>
          <% end %>
        </td>
        <td class=""><%= book.book_locale_statuses[0].locale.name %></td>
        <td><%= link_to(t('.read'), book_path(book.id), class: "btn btn-link") %></td>
        <td><%= link_to(t('.edit'), edit_book_path(book.id), class: "btn btn-link") if admin_user? %></td>
        <td><%= link_to(t('.destroy'), book_path(book.id), method: :delete, data: { confirm: t('.are_you_sure') }, class: "btn btn-link") if admin_user? %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="pagenation"><%= paginate @books %></div>


